* BUFEQU2_S, removed excess EQU w/exception of dependents below... 12/30/97TAT
*
; REMINDER: \HD DSR code relies upon SCSI and HFDC EQUATES matching one
; 3.19.2021 another; HFDC EQUates override what is here!
;           In theory, we should eliminate this file and reference the
;           common file. Future review....
;
; 3.19.2021 See CYLPLT for warning regarding SCS4,5,6 (and beyond)
;
            DEF CYLPLT   ;6.26.2021, for CLI\NEWCMDS (test scsmap)

           REF  SCNOFF       * only external reference? wow..
*SCNOFF EQU  >A212        ausgetrickst! MB!

CRDRAM EQU  >9000
TOTAU  EQU  >A           TOTAL NUMBER OF AU'S ON DISK

*MEMORY LAYOUT OF 4-K RAM
*
PAGRT1 EQU  CRDRAM       9000
WRKREG EQU  PAGRT1+2     9002MY WORKSPACE REGISTERS
MYR0   EQU  WRKREG       9002
MYR1   EQU  MYR0+2          4
MYR2   EQU  MYR1+2          6
MYR3   EQU  MYR2+2          8
MYR4   EQU  MYR3+2          a
MYR5   EQU  MYR4+2          c
MYR6   EQU  MYR5+2          e
MYR7   EQU  MYR6+2       FL10 FOR FIRST DISK ACCESS, 0=NO,1=YES
MYR8   EQU  MYR7+2       FLA2 FOR SECOND DISK RETRY, 0=NO,1=YES
MYR9   EQU  MYR8+2          4
MYR10  EQU  MYR9+2          6
MYR11  EQU  MYR10+2         8
MYR12  EQU  MYR11+2         a

PAGRT2 EQU  WRKREG+32       9022
WRKRG2 EQU  PAGRT2+2        9024
PAGRT3 EQU  WRKRG2+32       9044  THE GETVIB WORKSPACE
GTVREG EQU  PAGRT3+2        9046
*
COMBUF EQU  GTVREG+32       9066
TIMCM1 EQU  COMBUF+>12   COMPRESSED TIME MSW
TIMCM2 EQU  TIMCM1+2     COMPRESSED TIME LSW
VOLUME EQU  TIMCM2+2     0 IF DRIVE KNOWN <> 0 IF ACCESS BY VOLUME NAME
DRIVID EQU  VOLUME+1     DRIVE ID
VSERCH EQU  DRIVID+1     FLAG FOR DSK OR WDS VOLUME SEARCH
STSRCH EQU  VSERCH+2
NOPTRS EQU  STSRCH+2     NUMBER OF DIRECTORY & FILE POINTERS DCB
STRTSR EQU  NOPTRS+2     MEMORY TO SAVE STARTING POINT OF SECTOR SEARCH
DSKDIR EQU  STRTSR+2     SET IF DIRECTORY DSK1 OR DSK TRY
DSONWD EQU  DSKDIR+2     SET IF DSK1 ON HD
DSONTS EQU  DSONWD+2     SET IF DSK1 TRIED BEFORE
DIRAUN EQU  DSONTS+2          yalfu---gawd, equates suck...use DORG!!!
ANDIR  EQU  DIRAUN+2     PARENT DIR LOC ON DISK
MAXDRV EQU  ANDIR+2      MAX NUMBER OF FLOPPIES FOR VOLUME SEARCH
IOTOFH EQU  MAXDRV+2     FLAG FOR I/O ROUTINE I/O TO DSK1 ON HD
TIMER  EQU  IOTOFH+2     FFFF IF TIME I/O,0 IF FILE I/O
DIRECT EQU  TIMER+2      0 IF USE SECTOR IN AU, FFFF IGNORE
IOOSET EQU  DIRECT+2     I/O OFFSET
SAVAUN EQU  IOOSET+2     SAVED AU FOR DATA SECTOR
SAVSCA EQU  SAVAUN+2     SAVED SCINAU FOR DATA SECTOR
SECIND EQU  SAVSCA+2     OFFSET INTO SECTOR FOR FIXED RECORD
SAVR6S EQU  SECIND+2     SAVE INDEX INTO AU
OLDVCF EQU  SAVR6S+2     FLAG TO STATE IF OLD WDS CPU RAM I/O
SAVPG0 EQU  OLDVCF+2     SAVE PAGE
WAITD1 EQU  SAVPG0+2     FLAG TO DETERMINE IF DRIVE 1 ACCESSED BEFORE
ERRSMD EQU  WAITD1+2     ERROR IN I/O TO GIVE A HARD RESTORE OF HD
DIGFLG EQU  ERRSMD+2     FLAG FOR READING RECORD LENGTH
DATMFG EQU  DIGFLG+2     FLAG 0=WRITE REC LEN, 0<>WRITE DATA TO RECORD
*                                         HARD
;
; 3.19.2021
; WARNING: Extension to SCS6 will now overwrite FLPPLT (88 bytes) with
;          information for the devices. We don't use this info in the SCSI
;          DSR buffer page, so the overlap should be OK as long as the
;          HD.xxx files all respect SCSI vs. HFDC page requirements
;
CYLPLT EQU  DATMFG+2     DISK PARMS | # OF AU'S                             |
*
FLPPLT EQU CYLPLT+24     FLOPPY PARMS HERE
FLPPRM EQU  11*8+CYLPLT
*                                   |   # OF TRACKS    |
*                                   |STEP RATE|   FF=HD|
DIRIO  EQU  4*4+FLPPRM   FLAG FOR FILE(0)/DIR(FFFF)
GPLIO  EQU  DIRIO+2      FLAG FOR GPL I/O(FFFF) OF DSR(0)
DSECIO EQU  GPLIO+2      FLAG FOR DIRECT SECTOR I/O (ERROR CODE IN I/O)
PNAUN  EQU  DSECIO+2     AU # OF PATHNAME DIR ON DISK
PNLENG EQU  PNAUN+2      PATHNAME LENGTH
*
RAMBUF EQU  PNAUN+12
AUNUM  EQU  RAMBUF+2
SCINAU EQU  AUNUM+2
RAUNUM EQU  SCINAU+2     THE AU NUM THE SOFTWARE THIKS IT WANTS(DSK1ONHD)
FLAGRF EQU  RAUNUM+2     FLAG FOR READING FDR'S TO GET DSK1ONHD
REALFD EQU  FLAGRF+2     FLAG SET IF FLOPPY I/O, IF 0 THEN WDS I/O
NTRKIO EQU  REALFD+2
STRATE EQU  NTRKIO+2     STEP RATE
FPSELC EQU  STRATE+2     FLOPPY AND WINCHESTER SELECT
FAKIO0 EQU  FPSELC+2     FLAG FOR FAKE READ OF SECTOR 0
SAVCRU EQU  FAKIO0+2     TO SAVE THE CRU LOCATION DURING KEYSCAN
SV8374 EQU  SAVCRU+2     SAVE >8374 DURING KEYSCAN
MYUADL EQU  SV8374+2     USABLE ADDRESS
MYUADH EQU  MYUADL+2     USABLE ADDRESS
* THE NEXT 2 WORDS ARE THE REQUESTED SECTOR NUMBER IN GETAU
SAVR5  EQU  MYUADH+2
SAVR6  EQU  SAVR5+2
FR5SAV EQU  SAVR6+2
FR1SAV EQU  FR5SAV+2
SAVSR8 EQU  FR1SAV+2     VALUE OF LOGICAL TRACK DURING SEEK CMD
MTOSTS EQU  SAVSR8+2     MOTOR ON STATUS OF FLP DRV IN SECTOR I/O
RESRTN EQU  MTOSTS+2     RETURN FROM RESTORE COMMAND
CLUSNO EQU  RESRTN+2
NEWAU  EQU  CLUSNO+2     GIVES THE # OF AU'S ADDED IN GETAU
CYLDER EQU  NEWAU+2      FOR I/O THE BITS USED FOR RWC, AND WPR
RTRYIO EQU  CYLDER+2     FLAG TO RETRY IF WINCHESTER THE READ AGAIN
EMDKSZ EQU  RTRYIO+2     SIZE IN SECTORS OF THE EM DISK FILE
VIBCHG EQU  EMDKSZ+2     IF 0 VIB DID NOT CHANGE
VIBID  EQU  VIBCHG+1     DRIVE NO OF VIB
GTSBUF EQU  VIBID+1      BUFFER FOR USED SECTOR BITS
EMDKCB EQU  GTSBUF+260   CONTROL BLOCK FOR THE DK1 FCB
DK1FCB EQU  EMDKCB+>20+42   BUFFER FOR FDR FOR FLOPPY
FDKVIB EQU  DK1FCB+260   BUFFER FOR FLOPPY VIB
SC0BUF EQU  FDKVIB+260   BUFFER FOR FAKE READ OF SECTOR 0
*      END OF FILE
