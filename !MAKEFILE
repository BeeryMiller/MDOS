* File: !MAKEFILE
*
* ALERT -->MUST VALIDATE SOURCE FILES vs. MAKEFILE before release<-- /tt/
*
* Usage:
* ------
* MAKE HDOS              Build based on timestamps (requires updated $MAKE)
* MAKE HDOS,F            Force full build based on this file
*
* 1.18.2021 Remarked HLINK; routines not required (TEST1x are still good)
*           Remarked MCLI,HFDC and associated references
*           Added CLI\TIMES to CLI\COPYS label (missing dependency)
*           Added TIPI section from 6.60/updated file dependencies
*           Updated SCSI2 dependencies
*
* 1.23.2021 Consider adding HEAD\PAGENUMS as a global dependency
*
* 2.06.2021 Added TIPI XOP library
* 2.10.2021 Changed L8.Rs232 filenames
* 3.19.2021 NEWCMDS: added sector_s dependency [could be others!]
* 3.20.2021 Execute GenWIPE prior to LINK (in HDOS)
*           Updated IDE dependency in SCSI2
*         ? SECTOR_S added to NEWCMDS dependency
* 6.26.2021 SCSI POWERS added
* 6.27.2021 Fixed Newcmds, scsi2 to use HD\EQUATES and HEAD\pagenums
* 5.07.2022 Removed HD\MONS, L8\SECMONS, TIPI\XOPROUTINES
* 6.28.2022 Added SCSI2\INTS interrupt handler
* 7.17.2022 Added PAGENUMS dependency to CLI.FORMATS
* 7.19.2022 Added CLI\TELNETS dependency to NEWCMD (split source BWM)
* 7.25.2022 Added CYA Patch code references
*
ALL:   HDOS

*
* Unified version of MDOS (HFDC/Floppy/SCSI/TIPI)
*
HDOS:       HDOS\HDOS
HDOS\HDOS: HEAD\PG_NUM HHEAD L5-6 L7 L8 L9 L10 HD HCLI TASK HDOS\HDOSL \
           SC TIPI CYA\CYAPATCH
       ASM  CLI\HTITLES,CLI\HTITLE,,RCO
       ASM  CYA\CYAPATCH_S,CYA\CYAPATCH_O,,RCO
       WIPE
       LINK HDOS\HDOSL

CYA\CYAPATCH:    CYA\CYAPATCH_S
       ASM CYA\CYAPATCH_S,CYA\CYAPATCH_O,,RCO

* Pagenumbers are volatile
HEAD\PG_NUM:     HEAD\PG_NUMS HEAD\PAGENUMS
       ASM HEAD\PG_NUMS,HEAD\PG_NUM,,RCO
*
* power up, scheduler, and paging code
*
HHEAD:        HEAD\HOSHEAD
HEAD\HOSHEAD: HEAD\HOSHEADS HEAD\OSHEAD1S HEAD\HPAGES HEAD\HMOVTABS \
            HEAD\OSHEAD2S HEAD\PAGENUMS
            ASM HEAD\HOSHEADS,HEAD\HOSHEAD,,RCO

*
* task header
* 5.13.2022 Removed TASK1S
*
* TASK:  HEAD\TASKHEAD HEAD\TASK1

TASK:  HEAD\TASKHEAD
HEAD\TASKHEAD: HEAD\TASKHEADS
       ASM  HEAD\TASKHEADS,HEAD\TASKHEAD,,RCO

* HEAD\TASK1: HEAD\TASK1S
*        ASM  HEAD\TASK1S,HEAD\TASK1,,RCO

*
* keyboard, video, sound
*
L5-6:       L6\XOPS-G
L6\XOPS-G:  L6\XOPS-S L6\VX0003S L6\VX0405S L6\VX06S L6\VX07S L6\VX08S \
            L6\VX090AS L6\VX0B0ES L6\VX0F15S L6\VX161CS L6\VX1D23S \
            L6\VX2426S L6\VX282AS L6\VX2B2CS L6\VX2D2FS L6\VX353AS \
            L6\KEY1S L6\KEY2S HEAD\LOWMAP L6\CHARSETS L6\WRITETTY \
            L6\VX-INTS L6\SOUNDS HEAD\OSTASK L6\RS232DEBUG

       ASM L6\XOPS-S,L6\XOPS-G,,RCO

*
* memory management
*
L7:         L7\MANAGE2 L7\MBUF
L7\MANAGE2: L7\MANAGE2S L7\MANAGE2T HEAD\OSTASK L7\MEMPTRS HEAD\PAGENUMS
       ASM L7\MANAGE2S,L7\MANAGE2,,RCO

L7\MBUF:    L7\MBUFS L7\MEMPTRS
       ASM L7\MBUFS,L7\MBUF,,RCO
*
* DSR i/o library
*
* 5.7.2022, removed L8\SECMONS from L8\OBJ1
*
L8: L8\OBJ1 L8\OBJ2 L8\OBJ3 L8\OBJ4 L8\OBJ5

L8\OBJ1:    L8\LAYOUT HEAD\OSTASK L8\FDC-SRC-P L8\HDR1-P2 L8\HDR2-P2 \
            L8\SECT2-P L8\HFDFMT L8\VDPIO-P L8\PTRCON L8\FILEOP! L8\PASDAT \
            L8\OPEN&LS2 L8\SYSRTN-P L8\ILR L8\DSRMEM L8\MEMLST L8\LOADSAV-P \
            L8\DELETE-P L8\RW-P2 L8\CLORESSTS L8\GETAUS-P4 L8\GETSEC-P3 \
            L8\TIMES L8\GETVIB-P \
            HEAD\PAGENUMS
       ASM L8\FDC-SRC-P,L8\OBJ1,,RCO

L8\OBJ2:    L8\LAYOUT L8\COPY2-P2 L8\CFILES-P3 L8\COMPAR-P2 L8\FORMAT-P3 \
            L8\SECT3-P3 L8\DISK3-P3 L8\CIF \
            HEAD\PAGENUMS
       ASM L8\COPY2-P2,L8\OBJ2,,RCO

L8\OBJ3:    L8\LAYOUT L8\DSRPASS-S L8\DSRMEM HEAD\PAGENUMS
       ASM L8\DSRPASS-S,L8\OBJ3,,RCO

L8\OBJ4:    L8\LAYOUT L8\EA3DAT-S HEAD\PAGENUMS
       ASM L8\EA3DAT-S,L8\OBJ4,,RCO

L8\OBJ5:    L8\LAYOUT L8\RS-S L8\RSA2-P L8\RSB2-P L8\RSC2-P L8\RSD2-P \
            L8\RSBUFFERS L8\RSINTS \
            HEAD\PAGENUMS
       ASM L8\RS-S,L8\OBJ5,,RCO

*
* SCSI Sector access routines 10/20/94-11/12/94 mjm
* Reordered; COPY directives now in SCSI_S tat
* 1.18.2021, fixed dependencies
* 6.26.2021, added POWERS
* 6.27.2021, added HD\equates,HEAD\pagenums,tide9s dependencies
* 5.07.2022, removed SCSI2\TIDE8S in favor of TIDE9S [not fully tested]
* 6.28.2022, added INTS, new interrupt handler code for scsi/ide

SC:   SCSI2\SCSI_O
SCSI2\SCSI_O: SCSI2\SECTOR_S SCSI2\SCSIDRCT_S SCSI2\SCSIDMA2_S \
           SCSI2\SCSIDATA_S SCSI2\SCSILL_S SCSI2\SCSI_S SCSI2\POWERS \
           SCSI2\HRDSCSIS SCSI2\TIDE9S SCSI2\RS232DEBUG \
           SCSI2\SCSIEQU_S SCSI2\INTS \
           HD\EQUATES HEAD\PAGENUMS

       ASM SCSI2\SCSI_S,SCSI2\SCSI_O,,RCO

* TIPI ACCESS ROUTINES
* 11.22.2020 bwm
* 01.18.2021 added ostask; removed nonessential files tt
* 02.05.2021 added level2 dependency
* 05.07.2022 removed TIPI\XOPROUTINE per Beery's cleanup of XOPS
* 05.10.2022 added TIPI\POWERUP
* 06.20.2022 renamed ROM to TIPIS; TIPI-IO to CRU-IO
*
TIPI:  TIPI\TIPIO
TIPI\TIPIO: HEAD\OSTASK TIPI\TIPIS TIPI\HEADER TIPI\LEVEL9 TIPI\VDP-IO \
            TIPI\CRU-IO TIPI\RS232DEBUG TIPI\LEVEL2 TIPI\XOPS TIPI\POWERUP
       ASM TIPI\TIPIS,TIPI\TIPIO,,RCO
       ASM TIPI\XOPS,TIPI\XOPO,,RCO
*
* Fixed disk directory structure library.
*
* 5.07.2022 Removed HD\MONS
*
HD:    HD\HDOBJ

HD\HDOBJ:   HD\COPY HD\EQUATES HD\WINDS1-S HD\WINDS3-S HD\WINDS6-S HD\WINDS7-S \
            HD\FLPPRM HD\CIF HD\SETAXB HD\FINDFL HD\FRBITM HD\GETSEC \
            HD\SCROLL HD\TIME HD\SECTORIOW HD\SECTORIO8 HD\GETAU HD\GPLSUBS \
            HD\GETBUF HD\ADDADR HD\MAPR5 HD\VDPFCB HD\DATA \
            HEAD\PAGENUMS
       ASM HD\COPY,HD\HDOBJ,,RCO

*
* utilities
*
L9: L9\GENERAL L9\PARSEF L9\LOADF2 L9\FORK

L9\GENERAL: L9\GENERALS HEAD\OSTASK
       ASM L9\GENERALS,L9\GENERAL,,RCO

L9\PARSEF: L9\PARSEFS HEAD\OSTASK HEAD\LOWMAP
       ASM L9\PARSEFS,L9\PARSEF,,RCO

L9\LOADF2: L9\LOADF2S HEAD\OSTASK
       ASM L9\LOADF2S,L9\LOADF2,,RCO

L9\FORK: L9\FORKS HEAD\OSTASK HEAD\PAGENUMS
       ASM L9\FORKS,L9\FORK,,RCO

*
* math
*
L10:        L10\MATHO
L10\MATHO:  L10\FLOAT L10\CNS L10\CSNN L10\CFI L10\CIF L10\TRINSIC1 \
            L10\TRINSIC2 L10\MATHS

       ASM L10\MATHS,L10\MATHO,,RCO

*
* command line interpreter
*
* 1.23.2021, added pagenums dependency to overall CLI creation
* 5.08.2022, fixed PAGENUMS dependency (pointed to MDOS vs. HEAD)
* 7.19.2022, added TELNETS dependency to NEWCMD
*
HCLI: CLI\HCLI CLIH CLI\HTITLE CLI\NEWCMD HEAD\PAGENUMS

CLI\NEWCMD: CLI\NEWCMDS SCSI2\SECTOR_S HD\EQUATES CLI\TELNETS
       ASM CLI\NEWCMDS,CLI\NEWCMD,,RCO

CLI\HTITLE: CLI\HTITLES
       REM

CLI\HCLI: CLI\HCLIS CLI\HVERSIONS
       ASM CLI\HCLIS,CLI\HCLI,,RCO

CLIH:  CLI\GETCAT CLI\GETSTR CLI\CIS CLI\XOPVID CLI\MATCH CLI\COMMAND \
       CLI\CONVERT CLI\CLOCK CLI\DIR CLI\TREE CLI\TYPE CLI\MODE CLI\VOL \
       CLI\LAB CLI\FORMAT CLI\DISKCOPY CLI\CHKDSK CLI\FILEOP \
       CLI\PAGE CLI\BATCMD CLI\CMDSTK CLI\COPY CLI\DISKCOMP

* Added missing CLI\TIMES dependency 1.18.2021tt
CLI\COPY:   CLI\COPYS CLI\CATMAPS CLI\TIMES
       ASM CLI\COPYS,CLI\COPY,,RCO

CLI\GETCAT: CLI\GETCATS CLI\CATMAPS
       ASM CLI\GETCATS,CLI\GETCAT,,RCO

CLI\GETSTR: CLI\GETSTRS
       ASM CLI\GETSTRS,CLI\GETSTR,,RCO

CLI\CIS:    CLI\CISS
       ASM CLI\CISS,CLI\CIS,,RCO

CLI\XOPVID: CLI\XOPVIDS
       ASM CLI\XOPVIDS,CLI\XOPVID,,RCO

CLI\MATCH:  CLI\MATCHS
       ASM CLI\MATCHS,CLI\MATCH,,RCO

CLI\COMMAND:  CLI\COMMANDS
       ASM CLI\COMMANDS,CLI\COMMAND,,RCO

CLI\CONVERT:  CLI\CONVERTS
       ASM CLI\CONVERTS,CLI\CONVERT,,RCO

CLI\CLOCK:  CLI\CLOCKS
       ASM CLI\CLOCKS,CLI\CLOCK,,RCO

CLI\DIR:    CLI\DIRS CLI\CATMAPS
       ASM CLI\DIRS,CLI\DIR,,RCO

CLI\TREE:   CLI\TREES CLI\CATMAPS
       ASM CLI\TREES,CLI\TREE,,RCO

CLI\TYPE:   CLI\TYPES
       ASM CLI\TYPES,CLI\TYPE,,RCO

CLI\MODE:   CLI\MODES
       ASM CLI\MODES,CLI\MODE,,RCO

CLI\VOL:    CLI\VOLS CLI\CATMAPS
       ASM CLI\VOLS,CLI\VOL,,RCO

CLI\LAB:    CLI\LABS
       ASM CLI\LABS,CLI\LAB,,RCO

CLI\FORMAT: CLI\FORMATS HEAD\PAGENUMS
       ASM CLI\FORMATS,CLI\FORMAT,,RCO

CLI\DISKCOPY: CLI\DISKCOPYS
       ASM CLI\DISKCOPYS,CLI\DISKCOPY,,RCO

CLI\CHKDSK: CLI\CHKDSKS CLI\CATMAPS
       ASM CLI\CHKDSKS,CLI\CHKDSK,,RCO

CLI\FILEOP: CLI\FILEOPS CLI\CATMAPS
       ASM CLI\FILEOPS,CLI\FILEOP,,RCO

CLI\DISKCOMP: CLI\DISKCOMPS
       ASM CLI\DISKCOMPS,CLI\DISKCOMP,,RCO

CLI\PAGE:   CLI\PAGES
       ASM CLI\PAGES,CLI\PAGE,,RCO

CLI\BATCMD: CLI\BATCMDS HEAD\PAGENUMS
       ASM CLI\BATCMDS,CLI\BATCMD,,RCO

CLI\CMDSTK: CLI\CMDSTKS
       ASM CLI\CMDSTKS,CLI\CMDSTK,,RCO
* eof
